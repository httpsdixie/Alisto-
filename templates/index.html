{% extends "base.html" %}

{% block title %}Welcome{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="hero-section">
    <div class="hero-background"></div>
    <div class="hero-animation-1"></div>
    <div class="hero-animation-2"></div>
    
    <div class="container hero-content">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="hero-icon-wrapper mb-4">
                    <div class="hero-icon-ring"></div>
                    <i class="bi bi-shield-check hero-icon-main"></i>
                </div>
                
                <h1 class="hero-title">ALISTO!</h1>
                <p class="hero-subtitle"><em>EVSU-OC Campus Safety Reporting System</em></p>
                
                <div class="hero-divider"></div>
                
                <p class="hero-description">Join our community of campus guardians and help us report safety hazards, infrastructure issues, and maintenance concerns—together, we make our campus safer for everyone.</p>
                
                <div class="hero-cta-wrapper">
                    {% if current_user %}
                        {% if current_user.is_admin %}
                            <a href="/admin/dashboard" class="btn btn-warning btn-xl px-5 hero-btn-primary">
                                BE ALISTO!
                            </a>
                        {% else %}
                            <a href="/report/new" class="btn btn-warning btn-xl px-5 hero-btn-primary">
                                BE ALISTO!
                            </a>
                        {% endif %}
                    {% else %}
                        <a href="/register" class="btn btn-warning btn-xl px-5 hero-btn-primary">
                            BE ALISTO!
                        </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Separator -->
<div class="section-divider"></div>

<!-- How It Works Section -->
<div class="features-section py-5 bg-light">
    <div class="container">
        <h2 class="text-center mb-5 text-primary">HOW IT WORKS</h2>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm text-center">
                    <div class="card-body p-4">
                        <div class="feature-icon bg-primary text-white rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 80px; height: 80px;">
                            <i class="bi bi-pencil-square fs-2"></i>
                        </div>
                        <h4 class="card-title">Submit a Report</h4>
                        <p class="card-text text-muted">Easily report safety hazards, infrastructure issues, or maintenance concerns with photo evidence.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm text-center">
                    <div class="card-body p-4">
                        <div class="feature-icon bg-warning text-dark rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 80px; height: 80px;">
                            <i class="bi bi-clock-history fs-2"></i>
                        </div>
                        <h4 class="card-title">Track Progress</h4>
                        <p class="card-text text-muted">Monitor the status of your report in real-time. Get email notifications when there are updates.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm text-center">
                    <div class="card-body p-4">
                        <div class="feature-icon bg-success text-white rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 80px; height: 80px;">
                            <i class="bi bi-check-circle fs-2"></i>
                        </div>
                        <h4 class="card-title">Resolution & Feedback</h4>
                        <p class="card-text text-muted">Once resolved, confirm the fix and provide feedback to help improve campus services.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Separator -->
<div class="section-divider"></div>

<!-- Why Choose Alisto Section -->
<div class="response-stats-section py-5 bg-light">
    <div class="container">
        <h2 class="text-center mb-5 text-primary">WHY CHOOSE ALISTO?</h2>
        <div class="row g-4">
            <div class="col-md-3">
                <div class="stat-card text-center h-100">
                    <div class="stat-icon bg-primary text-white">
                        <i class="bi bi-lightning fs-1"></i>
                    </div>
                    <h4 class="mt-3 mb-2">Fast Response</h4>
                    <p class="text-muted">Avg 2-3 days from report to resolution</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card text-center h-100">
                    <div class="stat-icon bg-success text-white">
                        <i class="bi bi-camera fs-1"></i>
                    </div>
                    <h4 class="mt-3 mb-2">Photo Evidence</h4>
                    <p class="text-muted">Upload or capture photos directly from your phone</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card text-center h-100">
                    <div class="stat-icon bg-info text-white">
                        <i class="bi bi-bell fs-1"></i>
                    </div>
                    <h4 class="mt-3 mb-2">Real-time Updates</h4>
                    <p class="text-muted">Get notified when your report status changes</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card text-center h-100">
                    <div class="stat-icon bg-warning text-white">
                        <i class="bi bi-shield-check fs-1"></i>
                    </div>
                    <h4 class="mt-3 mb-2">Secure & Reliable</h4>
                    <p class="text-muted">Your reports are safe and tracked 24/7</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Separator -->
<div class="section-divider"></div>

<!-- Report Categories Section -->
<div class="categories-section py-5">
    <div class="container">
        <h2 class="text-center mb-5 text-primary">REPORT CATEGORIES</h2>
        <div class="row g-3 justify-content-center">
            <div class="col-6 col-md-3 col-lg-2">
                <div class="category-card text-center p-3 rounded bg-light">
                    <i class="bi bi-building fs-2 text-primary"></i>
                    <p class="mb-0 mt-2 small">Infrastructure</p>
                </div>
            </div>
            <div class="col-6 col-md-3 col-lg-2">
                <div class="category-card text-center p-3 rounded bg-light">
                    <i class="bi bi-exclamation-triangle fs-2 text-danger"></i>
                    <p class="mb-0 mt-2 small">Safety Hazard</p>
                </div>
            </div>
            <div class="col-6 col-md-3 col-lg-2">
                <div class="category-card text-center p-3 rounded bg-light">
                    <i class="bi bi-lightning fs-2 text-warning"></i>
                    <p class="mb-0 mt-2 small">Electrical</p>
                </div>
            </div>
            <div class="col-6 col-md-3 col-lg-2">
                <div class="category-card text-center p-3 rounded bg-light">
                    <i class="bi bi-droplet fs-2 text-info"></i>
                    <p class="mb-0 mt-2 small">Plumbing</p>
                </div>
            </div>
            <div class="col-6 col-md-3 col-lg-2">
                <div class="category-card text-center p-3 rounded bg-light">
                    <i class="bi bi-trash fs-2 text-success"></i>
                    <p class="mb-0 mt-2 small">Sanitation</p>
                </div>
            </div>
            <div class="col-6 col-md-3 col-lg-2">
                <div class="category-card text-center p-3 rounded bg-light">
                    <i class="bi bi-shield-lock fs-2 text-secondary"></i>
                    <p class="mb-0 mt-2 small">Security</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Separator -->
<div class="section-divider"></div>

<!-- Merged: Our Impact + FAQ + Learn More Section -->
<div style="background: linear-gradient(180deg, var(--primary-red) 0%, #6B0000 100%);">
    <!-- Our Impact Section -->
    <div class="impact-metrics-section py-2 text-white">
        <div class="container">
            <h2 class="text-center mb-4">OUR IMPACT</h2>
            <div class="row g-4">
                <div class="col-6 col-md-3 text-center">
                    <div class="metric-card">
                        <h3 class="metric-value mb-2" id="impact-resolved">0</h3>
                        <p class="metric-label mb-0">Issues Resolved</p>
                    </div>
                </div>
                <div class="col-6 col-md-3 text-center">
                    <div class="metric-card">
                        <h3 class="metric-value mb-2" id="impact-reports">0</h3>
                        <p class="metric-label mb-0">Total Reports</p>
                    </div>
                </div>
                <div class="col-6 col-md-3 text-center">
                    <div class="metric-card">
                        <h3 class="metric-value mb-2" id="impact-pending">0</h3>
                        <p class="metric-label mb-0">Currently Active</p>
                    </div>
                </div>
                <div class="col-6 col-md-3 text-center">
                    <div class="metric-card">
                        <h3 class="metric-value mb-2" id="impact-rating">4.8</h3>
                        <p class="metric-label mb-0"><span id="impact-stars">★★★★★</span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- FAQ Section -->
    <div class="faq-section py-2 bg-white">
        <div class="container">
            <h2 class="text-center mb-5 text-primary">FREQUENTLY ASKED QUESTIONS</h2>
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="accordion accordion-flush" id="faqAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                                    <i class="bi bi-question-circle me-2 text-primary"></i>How long does it take to get a response?
                                </button>
                            </h2>
                            <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Most reports receive a response within 2-3 days. High-priority safety hazards are reviewed immediately and resolved faster. You'll receive email and in-app notifications at each stage.
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                                    <i class="bi bi-question-circle me-2 text-primary"></i>Is my report anonymous?
                                </button>
                            </h2>
                            <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Your name is visible to our maintenance team so they can contact you with questions. However, your report is confidential and only accessed by authorized personnel. We never share personal information externally.
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                                    <i class="bi bi-question-circle me-2 text-primary"></i>How do I track my report status?
                                </button>
                            </h2>
                            <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Once logged in, go to "My Reports" to see all your submissions with current status (Pending, In Progress, or Resolved). You can also use the "Track Report" feature to search by ticket ID. We send email notifications for every status update.
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq4">
                                    <i class="bi bi-question-circle me-2 text-primary"></i>Can I delete my report?
                                </button>
                            </h2>
                            <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Yes, you can delete Pending reports by providing a reason. Once a report is In Progress or Resolved, it can't be deleted (for audit trail purposes). Deletions are logged and visible to administrators.
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq5">
                                    <i class="bi bi-question-circle me-2 text-primary"></i>What if I'm not satisfied with the resolution?
                                </button>
                            </h2>
                            <div id="faq5" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    You can provide feedback (1-5 star rating) when marking a report as resolved. Include comments about your experience so we can improve our service. Your feedback helps our team provide better support.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Learn More Section -->
    <div class="lead-magnet-section" style="padding: 1rem 0;">
        <div class="container">
            <div class="row align-items-center g-2">
                <!-- Avatar Column -->
                <div class="col-lg-5 text-center">
                    <img src="/static/images/alisto-avatar.png" alt="Alisto Guardian" style="max-width: 100%; height: auto; max-height: 320px;">
                </div>
                <!-- Content Column -->
                <div class="col-lg-7 text-white d-flex flex-column justify-content-center text-center">
                    <h2 class="mb-2" style="font-size: 2.2rem; font-weight: 800;">LEARN MORE ABOUT ALISTO!</h2>
                    <p style="font-size: 1.1rem; margin-bottom: 1.25rem;">Discover our mission and vision for a safer, stronger campus community.</p>
                    <div style="display: flex; gap: 1.5rem; flex-wrap: wrap; justify-content: center;">
                        <a href="/about" class="btn btn-light btn-lg px-5" style="font-weight: 800; letter-spacing: 1px;">
                            <i class="bi bi-info-circle me-2"></i>LEARN MORE
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Load impact stats
    fetch('/api/home-stats')
        .then(response => response.json())
        .then(data => {
            document.getElementById('impact-resolved').textContent = data.resolved;
            document.getElementById('impact-reports').textContent = data.total;
            document.getElementById('impact-pending').textContent = data.pending + data.in_progress;
            document.getElementById('impact-rating').textContent = data.rating;
            document.getElementById('impact-stars').textContent = data.stars;
        })
        .catch(error => console.error('Error loading stats:', error));
});
</script>
{% endblock %}
